<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deployment Readiness Gate</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, Helvetica, sans-serif;
      background-color: #F5F5F5;
      padding: 16px;
      color: #333333;
      line-height: 1.6;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background: #FFFFFF;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    header {
      background: #1A1A2E;
      color: #FFFFFF;
      padding: 24px 16px;
      text-align: center;
    }

    header h1 {
      font-size: 24px;
      margin-bottom: 8px;
    }

    .subtitle {
      color: #F5F5F5;
      font-size: 16px;
    }

    main {
      padding: 24px 16px;
    }

    .form-group {
      margin-bottom: 24px;
    }

    label {
      display: block;
      font-weight: bold;
      margin-bottom: 8px;
      color: #1A1A2E;
    }

    select {
      width: 100%;
      padding: 12px;
      border: 2px solid #F5F5F5;
      border-radius: 4px;
      font-size: 14px;
      background: #FFFFFF;
      color: #333333;
    }

    select:focus {
      outline: none;
      border-color: #FF5733;
    }

    button {
      width: 100%;
      background: #FF5733;
      color: #FFFFFF;
      border: none;
      padding: 16px;
      font-size: 16px;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 8px;
    }

    button:hover {
      background: #E14A2B;
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .hidden {
      display: none;
    }

    .results {
      margin-top: 24px;
      padding: 24px;
      border-radius: 8px;
      border: 2px solid;
    }

    .go-result {
      background: #E8F5E8;
      border-color: #4CAF50;
    }

    .no-go-result {
      background: #FFE8E8;
      border-color: #FF5733;
    }

    .decision {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 16px;
    }

    .go-decision {
      color: #4CAF50;
    }

    .no-go-decision {
      color: #FF5733;
    }

    .summary {
      margin-bottom: 16px;
    }

    .blocking-issues {
      margin-bottom: 16px;
    }

    .blocking-issues h3 {
      color: #FF5733;
      margin-bottom: 8px;
    }

    .blocking-issues ul {
      margin-left: 20px;
    }

    .blocking-issues li {
      margin-bottom: 4px;
    }

    .next-actions {
      background: #F5F5F5;
      padding: 16px;
      border-radius: 4px;
      border-left: 4px solid #FF5733;
    }

    .next-actions h3 {
      color: #1A1A2E;
      margin-bottom: 8px;
    }

    .action-item {
      background: #FFFFFF;
      padding: 12px;
      margin-bottom: 8px;
      border-radius: 4px;
      border-left: 3px solid #FF5733;
    }

    .score-breakdown {
      margin: 16px 0;
      padding: 16px;
      background: #F5F5F5;
      border-radius: 4px;
    }

    .score-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      padding: 8px;
      background: #FFFFFF;
      border-radius: 4px;
    }

    .score-pass {
      border-left: 3px solid #4CAF50;
    }

    .score-fail {
      border-left: 3px solid #FF5733;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Deployment Readiness Gate</h1>
      <p class="subtitle">Determine if your deployment is ready to proceed or must be stopped</p>
    </header>
    <main>
      <form id="readinessForm">
        <div class="form-group">
          <label for="codeReview">Code Review Status</label>
          <select id="codeReview" required>
            <option value="">Select status...</option>
            <option value="4">Approved by 2+ reviewers</option>
            <option value="3">Approved by 1 reviewer</option>
            <option value="2">Pending review</option>
            <option value="1">Not reviewed</option>
          </select>
        </div>

        <div class="form-group">
          <label for="testCoverage">Test Coverage</label>
          <select id="testCoverage" required>
            <option value="">Select coverage...</option>
            <option value="4">All tests pass (100%)</option>
            <option value="3">Most tests pass (90-99%)</option>
            <option value="2">Some tests fail (70-89%)</option>
            <option value="1">Many tests fail (<70%)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="backupStatus">Backup & Rollback Plan</label>
          <select id="backupStatus" required>
            <option value="">Select backup status...</option>
            <option value="4">Complete backup + tested rollback</option>
            <option value="3">Backup only</option>
            <option value="2">Partial backup</option>
            <option value="1">No backup</option>
          </select>
        </div>

        <div class="form-group">
          <label for="stakeholderApproval">Stakeholder Sign-off</label>
          <select id="stakeholderApproval" required>
            <option value="">Select approval status...</option>
            <option value="4">All stakeholders approved</option>
            <option value="3">Most stakeholders approved</option>
            <option value="2">Some stakeholders pending</option>
            <option value="1">No approval obtained</option>
          </select>
        </div>

        <div class="form-group">
          <label for="environmentReady">Production Environment Status</label>
          <select id="environmentReady" required>
            <option value="">Select environment status...</option>
            <option value="4">Fully configured and tested</option>
            <option value="3">Configured but not tested</option>
            <option value="2">Partially configured</option>
            <option value="1">Not ready</option>
          </select>
        </div>

        <button type="submit">Check Deployment Readiness</button>
      </form>

      <div id="results" class="hidden">
        <!-- Results will be populated here -->
      </div>
    </main>
  </div>

  <script>
    const form = document.getElementById('readinessForm');
    const resultsDiv = document.getElementById('results');

    const criteria = {
      codeReview: 'Code Review',
      testCoverage: 'Test Coverage', 
      backupStatus: 'Backup & Rollback',
      stakeholderApproval: 'Stakeholder Sign-off',
      environmentReady: 'Environment Readiness'
    };

    const descriptions = {
      codeReview: {
        4: 'Approved by 2+ reviewers',
        3: 'Approved by 1 reviewer', 
        2: 'Pending review',
        1: 'Not reviewed'
      },
      testCoverage: {
        4: 'All tests pass (100%)',
        3: 'Most tests pass (90-99%)',
        2: 'Some tests fail (70-89%)', 
        1: 'Many tests fail (<70%)'
      },
      backupStatus: {
        4: 'Complete backup + tested rollback',
        3: 'Backup only',
        2: 'Partial backup',
        1: 'No backup'
      },
      stakeholderApproval: {
        4: 'All stakeholders approved',
        3: 'Most stakeholders approved',
        2: 'Some stakeholders pending',
        1: 'No approval obtained'
      },
      environmentReady: {
        4: 'Fully configured and tested',
        3: 'Configured but not tested',
        2: 'Partially configured',
        1: 'Not ready'
      }
    };

    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(form);
      const values = {};
      
      // Get all values
      Object.keys(criteria).forEach(key => {
        values[key] = parseInt(document.getElementById(key).value);
      });

      // Check if all fields are filled
      const allFilled = Object.values(values).every(val => !isNaN(val));
      if (!allFilled) {
        alert('Please fill in all fields');
        return;
      }

      const result = evaluateReadiness(values);
      displayResults(result, values);
    });

    function evaluateReadiness(values) {
      const minimumThresholds = {
        codeReview: 3,      // Must have at least 1 reviewer approval
        testCoverage: 3,    // Must have 90%+ test pass rate
        backupStatus: 3,    // Must have backup plan
        stakeholderApproval: 3, // Must have most stakeholders approved
        environmentReady: 3 // Must be configured
      };

      const blockingIssues = [];
      const nextActions = [];
      
      // Check each criterion against minimum threshold
      Object.keys(minimumThresholds).forEach(key => {
        if (values[key] < minimumThresholds[key]) {
          blockingIssues.push({
            criterion: criteria[key],
            current: descriptions[key][values[key]],
            required: descriptions[key][minimumThresholds[key]]
          });
        }
      });

      // Generate specific next actions based on failures
      if (values.codeReview < 3) {
        nextActions.push('Schedule immediate code review with senior developers');
      }
      if (values.testCoverage < 3) {
        nextActions.push('Fix failing tests before proceeding - deployment blocked until 90%+ pass rate');
      }
      if (values.backupStatus < 3) {
        nextActions.push('Create complete backup and test rollback procedure');
      }
      if (values.stakeholderApproval < 3) {
        nextActions.push('Obtain approval from remaining stakeholders');
      }
      if (values.environmentReady < 3) {
        nextActions.push('Complete production environment setup and validation');
      }

      const isReady = blockingIssues.length === 0;
      
      return {
        decision: isReady ? 'GO' : 'NO-GO',
        isReady,
        blockingIssues,
        nextActions: isReady ? ['Execute deployment plan', 'Monitor deployment metrics', 'Prepare rollback if issues occur'] : nextActions,
        totalScore: Object.values(values).reduce((sum, val) => sum + val, 0),
        maxScore: Object.keys(values).length * 4
      };
    }

    function displayResults(result, values) {
      const resultClass = result.isReady ? 'go-result' : 'no-go-result';
      const decisionClass = result.isReady ? 'go-decision' : 'no-go-decision';
      
      let scoreBreakdown = '<div class="score-breakdown"><h3>Readiness Assessment</h3>';
      Object.keys(criteria).forEach(key => {
        const score = values[key];
        const isPass = score >= 3;
        scoreBreakdown += `
          <div class="score-item ${isPass ? 'score-pass' : 'score-fail'}">
            <span><strong>${criteria[key]}:</strong> ${descriptions[key][score]}</span>
            <span>${isPass ? '✓ PASS' : '✗ FAIL'}</span>
          </div>
        `;
      });
      scoreBreakdown += '</div>';

      let blockingSection = '';
      if (result.blockingIssues.length > 0) {
        blockingSection = `
          <div class="blocking-issues">
            <h3>Blocking Issues (${result.blockingIssues.length})</h3>
            <ul>
              ${result.blockingIssues.map(issue => 
                `<li><strong>${issue.criterion}:</strong> Currently "${issue.current}" - Required: "${issue.required}"</li>`
              ).join('')}
            </ul>
          </div>
        `;
      }

      resultsDiv.innerHTML = `
        <div class="results ${resultClass}">
          <div class="decision ${decisionClass}">
            DEPLOYMENT ${result.decision}
          </div>
          
          <div class="summary">
            ${result.isReady ? 
              'All critical deployment criteria met. Your deployment is approved to proceed.' : 
              `Deployment blocked. ${result.blockingIssues.length} critical issue${result.blockingIssues.length > 1 ? 's' : ''} must be resolved.`
            }
          </div>

          ${scoreBreakdown}
          ${blockingSection}

          <div class="next-actions">
            <h3>Required Actions</h3>
            ${result.nextActions.map(action => 
              `<div class="action-item">${action}</div>`
            ).join('')}
          </div>
        </div>
      `;
      
      resultsDiv.classList.remove('hidden');
      resultsDiv.scrollIntoView({ behavior: 'smooth' });
    }
  </script>
</body>
</html>