<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Savings Goal Timeline Calculator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, Helvetica, sans-serif;
      background-color: #F5F5F5;
      color: #333333;
      line-height: 1.6;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 24px 16px;
    }

    header {
      background-color: #1A1A2E;
      color: #FFFFFF;
      padding: 24px;
      border-radius: 8px;
      margin-bottom: 24px;
      text-align: center;
    }

    header h1 {
      font-size: 28px;
      margin-bottom: 8px;
      font-weight: bold;
    }

    .subtitle {
      font-size: 16px;
      opacity: 0.9;
    }

    form {
      background-color: #FFFFFF;
      padding: 24px;
      border-radius: 8px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #1A1A2E;
    }

    input[type="number"] {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #F5F5F5;
      border-radius: 4px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: #FF5733;
    }

    button {
      background-color: #FF5733;
      color: #FFFFFF;
      border: none;
      padding: 16px 32px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #E84A2B;
    }

    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    .hidden {
      display: none;
    }

    .results {
      background-color: #FFFFFF;
      padding: 24px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-top: 24px;
    }

    .verdict {
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .verdict.excellent {
      background-color: #d4edda;
      color: #155724;
      border: 2px solid #c3e6cb;
    }

    .verdict.proceed {
      background-color: #fff3cd;
      color: #856404;
      border: 2px solid #ffeaa7;
    }

    .verdict.adjust {
      background-color: #f8d7da;
      color: #721c24;
      border: 2px solid #f5c6cb;
    }

    .timeline-summary {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-bottom: 24px;
    }

    .summary-item {
      text-align: center;
      padding: 16px;
      background-color: #F5F5F5;
      border-radius: 8px;
    }

    .summary-value {
      font-size: 24px;
      font-weight: bold;
      color: #FF5733;
      margin-bottom: 4px;
    }

    .summary-label {
      font-size: 14px;
      color: #666;
    }

    .chart-container {
      margin-top: 24px;
      padding: 16px;
      background-color: #F5F5F5;
      border-radius: 8px;
    }

    .chart {
      width: 100%;
      height: 300px;
      background-color: #FFFFFF;
      border: 1px solid #ddd;
      border-radius: 4px;
      position: relative;
      overflow: hidden;
    }

    .chart-title {
      text-align: center;
      font-weight: bold;
      margin-bottom: 16px;
      color: #1A1A2E;
    }

    .chart-svg {
      width: 100%;
      height: 100%;
    }

    .error {
      color: #721c24;
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      padding: 12px;
      border-radius: 4px;
      margin-top: 16px;
    }

    @media (max-width: 480px) {
      .timeline-summary {
        grid-template-columns: 1fr;
      }

      .summary-value {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Savings Goal Timeline Calculator</h1>
      <p class="subtitle">Calculate exactly how long it will take to reach your savings goal with compound interest</p>
    </header>
    <main>
      <form id="savingsForm">
        <div class="form-group">
          <label for="targetAmount">Target Savings Goal ($)</label>
          <input type="number" id="targetAmount" name="targetAmount" min="1" step="0.01" required>
        </div>
        <div class="form-group">
          <label for="monthlyContribution">Monthly Savings ($)</label>
          <input type="number" id="monthlyContribution" name="monthlyContribution" min="1" step="0.01" required>
        </div>
        <div class="form-group">
          <label for="annualInterestRate">Annual Interest Rate (%)</label>
          <input type="number" id="annualInterestRate" name="annualInterestRate" min="0" max="50" step="0.01" required>
        </div>
        <button type="submit" id="calculateBtn">Calculate Timeline</button>
      </form>
      <div id="results" class="hidden">
        <div id="verdict" class="verdict"></div>
        <div class="timeline-summary">
          <div class="summary-item">
            <div class="summary-value" id="timeToGoal"></div>
            <div class="summary-label">Time to Goal</div>
          </div>
          <div class="summary-item">
            <div class="summary-value" id="totalContributions"></div>
            <div class="summary-label">Total Contributions</div>
          </div>
        </div>
        <div class="chart-container">
          <div class="chart-title">Your Savings Growth Projection</div>
          <div class="chart">
            <svg class="chart-svg" id="chartSvg"></svg>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script>
    function calculateCompoundGrowth(monthlyContribution, annualRate, targetAmount) {
      const monthlyRate = annualRate / 100 / 12;
      let balance = 0;
      let month = 0;
      const growthData = [];
      
      while (balance < targetAmount && month < 600) { // Cap at 50 years
        month++;
        balance = balance * (1 + monthlyRate) + monthlyContribution;
        
        // Store data points for chart (every 6 months for readability)
        if (month % 6 === 0 || balance >= targetAmount) {
          growthData.push({
            month: month,
            balance: balance
          });
        }
      }
      
      return {
        months: month,
        finalBalance: balance,
        growthData: growthData,
        totalContributions: monthlyContribution * month
      };
    }

    function formatCurrency(amount) {
      return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(amount);
    }

    function formatTime(months) {
      const years = Math.floor(months / 12);
      const remainingMonths = months % 12;
      
      if (years === 0) {
        return `${months} month${months === 1 ? '' : 's'}`;
      } else if (remainingMonths === 0) {
        return `${years} year${years === 1 ? '' : 's'}`;
      } else {
        return `${years} year${years === 1 ? '' : 's'} ${remainingMonths} month${remainingMonths === 1 ? '' : 's'}`;
      }
    }

    function drawChart(data, targetAmount) {
      const svg = document.getElementById('chartSvg');
      svg.innerHTML = '';
      
      const margin = { top: 20, right: 20, bottom: 40, left: 60 };
      const width = svg.clientWidth - margin.left - margin.right;
      const height = svg.clientHeight - margin.top - margin.bottom;
      
      if (width <= 0 || height <= 0) return;
      
      const maxX = Math.max(...data.map(d => d.month));
      const maxY = Math.max(targetAmount, Math.max(...data.map(d => d.balance)));
      
      const scaleX = width / maxX;
      const scaleY = height / maxY;
      
      // Create path for the line
      let pathData = '';
      data.forEach((point, index) => {
        const x = margin.left + point.month * scaleX;
        const y = margin.top + height - (point.balance * scaleY);
        pathData += (index === 0 ? 'M' : 'L') + ` ${x} ${y}`;
      });
      
      // Draw the line
      const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      path.setAttribute('d', pathData);
      path.setAttribute('stroke', '#FF5733');
      path.setAttribute('stroke-width', '3');
      path.setAttribute('fill', 'none');
      svg.appendChild(path);
      
      // Draw target line
      const targetY = margin.top + height - (targetAmount * scaleY);
      const targetLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      targetLine.setAttribute('x1', margin.left);
      targetLine.setAttribute('y1', targetY);
      targetLine.setAttribute('x2', margin.left + width);
      targetLine.setAttribute('y2', targetY);
      targetLine.setAttribute('stroke', '#1A1A2E');
      targetLine.setAttribute('stroke-width', '2');
      targetLine.setAttribute('stroke-dasharray', '5,5');
      svg.appendChild(targetLine);
      
      // Add target label
      const targetLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      targetLabel.setAttribute('x', margin.left + width - 10);
      targetLabel.setAttribute('y', targetY - 5);
      targetLabel.setAttribute('text-anchor', 'end');
      targetLabel.setAttribute('font-size', '12');
      targetLabel.setAttribute('fill', '#1A1A2E');
      targetLabel.textContent = 'Goal';
      svg.appendChild(targetLabel);
      
      // Add axes labels
      const xLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      xLabel.setAttribute('x', margin.left + width / 2);
      xLabel.setAttribute('y', margin.top + height + 35);
      xLabel.setAttribute('text-anchor', 'middle');
      xLabel.setAttribute('font-size', '12');
      xLabel.setAttribute('fill', '#666');
      xLabel.textContent = 'Months';
      svg.appendChild(xLabel);
      
      const yLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      yLabel.setAttribute('x', 15);
      yLabel.setAttribute('y', margin.top + height / 2);
      yLabel.setAttribute('text-anchor', 'middle');
      yLabel.setAttribute('font-size', '12');
      yLabel.setAttribute('fill', '#666');
      yLabel.setAttribute('transform', `rotate(-90, 15, ${margin.top + height / 2})`);
      yLabel.textContent = 'Total Savings ($)';
      svg.appendChild(yLabel);
    }

    function showResults(result, targetAmount) {
      const resultsDiv = document.getElementById('results');
      const verdictDiv = document.getElementById('verdict');
      const timeToGoalDiv = document.getElementById('timeToGoal');
      const totalContributionsDiv = document.getElementById('totalContributions');
      
      // Determine verdict
      const years = result.months / 12;
      let verdictText, verdictClass;
      
      if (years > 10) {
        verdictText = 'ADJUST PLAN - Increase monthly savings or find higher yield';
        verdictClass = 'adjust';
      } else if (years >= 5) {
        verdictText = 'PROCEED WITH DISCIPLINE - Solid long-term plan';
        verdictClass = 'proceed';
      } else {
        verdictText = 'EXCELLENT - Aggressive savings plan on track';
        verdictClass = 'excellent';
      }
      
      verdictDiv.textContent = verdictText;
      verdictDiv.className = `verdict ${verdictClass}`;
      
      timeToGoalDiv.textContent = formatTime(result.months);
      totalContributionsDiv.textContent = formatCurrency(result.totalContributions);
      
      resultsDiv.classList.remove('hidden');
      
      // Draw chart after a brief delay to ensure SVG is rendered
      setTimeout(() => drawChart(result.growthData, targetAmount), 100);
    }

    document.getElementById('savingsForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const targetAmount = parseFloat(document.getElementById('targetAmount').value);
      const monthlyContribution = parseFloat(document.getElementById('monthlyContribution').value);
      const annualInterestRate = parseFloat(document.getElementById('annualInterestRate').value);
      
      // Validation
      if (targetAmount <= 0 || monthlyContribution <= 0 || annualInterestRate < 0) {
        alert('Please enter valid positive values for target amount and monthly savings. Interest rate cannot be negative.');
        return;
      }
      
      if (monthlyContribution > targetAmount) {
        alert('Monthly savings cannot exceed your target amount.');
        return;
      }
      
      const calculateBtn = document.getElementById('calculateBtn');
      calculateBtn.textContent = 'Calculating...';
      calculateBtn.disabled = true;
      
      setTimeout(() => {
        const result = calculateCompoundGrowth(monthlyContribution, annualInterestRate, targetAmount);
        
        if (result.months >= 600) {
          alert('Goal will take more than 50 years to reach. Consider increasing your monthly savings or finding a higher interest rate.');
          calculateBtn.textContent = 'Calculate Timeline';
          calculateBtn.disabled = false;
          return;
        }
        
        showResults(result, targetAmount);
        calculateBtn.textContent = 'Calculate Timeline';
        calculateBtn.disabled = false;
      }, 500);
    });
    
    // Handle window resize for chart
    window.addEventListener('resize', function() {
      const resultsDiv = document.getElementById('results');
      if (!resultsDiv.classList.contains('hidden')) {
        setTimeout(() => {
          const form = document.getElementById('savingsForm');
          const formData = new FormData(form);
          const targetAmount = parseFloat(formData.get('targetAmount'));
          const monthlyContribution = parseFloat(formData.get('monthlyContribution'));
          const annualInterestRate = parseFloat(formData.get('annualInterestRate'));
          
          if (targetAmount && monthlyContribution && annualInterestRate >= 0) {
            const result = calculateCompoundGrowth(monthlyContribution, annualInterestRate, targetAmount);
            drawChart(result.growthData, targetAmount);
          }
        }, 100);
      }
    });
  </script>
</body>
</html>